$:
  vscode:
    - docker:
        image: docker.cnb.cool/abigmiu/baseenv
      services:
        - vscode
        - docker
      stages:
        - name: 安装依赖
          script: pnpm install --frozen-lockfile

# 推送到github
.sync_to_github: &sync_to_github
  docker:
    image: alpine/git:latest
  imports:
    - https://cnb.cool/abigmiu/keys/-/blob/main/keys.yml
  stages:
    - name: sync-to-github
      script: sh .build/sync-to-github.sh

# 匹配所有分支
"**":
  push:
    - *sync_to_github
